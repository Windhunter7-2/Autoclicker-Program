"use strict";!function(){window.romd=window.romd||{cmd:[]},window.romd.cmd=window.romd.cmd||[];var e=window.romd,t="data-settings-function";e.__log=function(e,t){if(localStorage.getItem("romd.debug.consoleDebug")){var n=new Date,o=[n.getHours(),n.getMinutes(),n.getSeconds()].join(":");o+="."+n.getMilliseconds();var r=o+": RoxotDynamic: "+e;t?console.log(r,t):console.log(r)}},e.__resetRerunTime=function(e){delete e.rerunTime},e.__calculateRerunTime=function(e){var t=e.rerunTime||50;t*=2;var n=e.rerunTimeLimit||1e3;return t>n&&(t=n),e.rerunTime=t,t},e.__getSourceWidth=function(e){var t=!1;e.offsetWidth||(t=e.style.width,e.style.width="100%");var n=e.offsetWidth;return!1!==t&&(e.style.width=t),n},e.__refind=function(t){var n=e.__calculateRerunTime(t);return setTimeout(function(){e.findAndDisplay(t)},n),n},e.__isSupportPage=function(e){var t=e.pageLimit||{};if(t.alreadyChecked||!1)return t.result;var n=t.type||!1;if(!n)return!0;var o=t.patterns||[],r=!1,i=location.href;o.forEach(function(e){new RegExp(e,"i").test(i)&&(r=!0)});var a="whitelist"===n;return r||(a=!a),t.alreadyChecked=!0,t.result=a,a},e.findAndDisplay=function(t){if(!e.__isSupportPage(t))return void e.__log('Block "'+t.selector+'" removed because not pass pageLimit.',t);var n=t.infinityScroll||!1,o=t.selector;n&&(o+=":not(.roxot-dynamic-inited)");var r=document.querySelector(o);if(!r){var i=e.__refind(t);return void e.__log('Can not found source element "'+t.selector+'". Check again in '+i+" ms.",t)}e.__log('Found source element "'+t.selector+'".',t),t.placementId?e.__displayPlacement(r,t):e.__displayTags(r,t);var a=r.getAttribute("class");if(a+=" roxot-dynamic-inited",r.setAttribute("class",a),n){e.__resetRerunTime(t);var s=e.__refind(t);e.__log("Rerun infinity block "+t.selector+" block. Check again in "+s+" ms.",t)}},e.__displayTags=function(t,n){var o=e.__getSourceWidth(t);e.__log('Source element "'+n.selector+'" has size '+o+".",n);var r=n.cases.filter(function(e){return e.size<=o}).sort(function(e,t){return e.size-t.size});if(!r.length){var i=e.__refind(n);return void e.__log("Not found support sizeCase for "+o+" size of "+n.selector+" block. Check again in "+i+" ms.",n)}var a=r.pop();e.__log("Use sizeCase with size "+a.size+" for "+n.selector+" block.",{block:n,sizeCase:a});var s=[];a.tags.forEach(function(e){var o=document.createElement("div");o.setAttribute("class","roxotDynamic"),o.style.textAlign="center",o.style.verticalAlign="top",o.style.width="100%";var r=t.insertAdjacentElement(n.insertPosition||"beforeend",o);for(var i in e.style||{})r.style[i]=e.style[i];for(var a in e.attributes||{})r.setAttribute(a,e.attributes[a]);for(var c in e.data||{})r.dataset[c]=e.data[c];var d="roxotAd-"+Math.floor(1e5*Math.random()),l=e.classes||[];l.push("roxotAd");var u=document.createElement("div");u.setAttribute("class",l.join(" ")),u.setAttribute("id",d),u.style.display="inline-block";r.appendChild(u);s.push({divId:d,tagId:e.tagId})}),s.length&&(window.rom=window.rom||{cmd:[]},window.rom.cmd=window.rom.cmd||[],window.rom.cmd.push(function(){s.forEach(function(e){window.rom.display(e.divId,e.tagId)})}),e.__log("Build "+s.length+" tags and run roxot manager for "+n.selector+" block.",{block:n,ads:s}))},e.__displayPlacement=function(e,n){var o="roxotDynamic-"+Math.floor(1e5*Math.random()),r=document.createElement("div");r.setAttribute("class","roxotPlacementDynamic"),r.setAttribute("id",o),r.style.textAlign="center",r.style.verticalAlign="top",r.style.width="100%";var i=e.getAttribute(t);i&&r.setAttribute(t,i);var a=n.insertPosition||"beforeend";"instead"===a&&(e.innerText="",a="afterbegin"),e.insertAdjacentElement(a,r),window.rom=window.rom||{cmd:[]},window.rom.cmd=window.rom.cmd||[],window.rom.cmd.push(function(){window.rom.displayPlacement(o,n.placementId)})},e.display=function(t){t.forEach(function(t){e.findAndDisplay(t)})},e.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){console.error("Error processing command",e)}else console.error("Commands written into romd.cmd must be wrapped in a function")},e.cmd.forEach(function(t){return e.cmd.push(t)})}();